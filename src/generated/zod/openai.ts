// Generated by ts-to-zod
import { z } from "zod";

export const llmProgressSchema = z.union([
  z.object({
    stage: z.literal("upload"),
    index: z.number(),
    total: z.number(),
    step: z.number().optional(),
    steps: z.number().optional(),
  }),
  z.object({
    stage: z.literal("stream"),
    received: z.number(),
    total: z.number(),
    done: z.boolean(),
    step: z.number().optional(),
    steps: z.number().optional(),
  }),
  z.object({
    stage: z.literal("retry"),
    attempt: z.number(),
    reason: z.string(),
    step: z.number().optional(),
    steps: z.number().optional(),
  }),
]);

export const paperworkInfoSchema = z.object({
  contact: z.string().optional(),
  vehicle: z.object({
    vin: z.string().optional(),
    registrationStatus: z.string().optional(),
    licensePlateState: z.string().optional(),
    licensePlateNumber: z.string().optional(),
  }),
  callsToAction: z.array(z.string()).optional(),
});

export const paperworkAnalysisSchema = z.object({
  text: z.string(),
  info: paperworkInfoSchema.nullable(),
});

export const localizedTextSchema = z.record(z.string());

export const violationReportSchema = z.object({
  violationType: z.string(),
  details: localizedTextSchema,
  location: z.string().optional(),
  language: z.string().optional(),
  vehicle: z.object({
    make: z.string().optional(),
    model: z.string().optional(),
    type: z.string().optional(),
    color: z.string().optional(),
    licensePlateState: z.string().optional(),
    licensePlateNumber: z.string().optional(),
  }),
  images: z.record(
    z.object({
      representationScore: z.number(),
      highlights: localizedTextSchema.optional(),
      context: localizedTextSchema.optional(),
      violation: z.boolean().optional(),
      paperwork: z.boolean().optional(),
      paperworkText: z.string().optional(),
      paperworkInfo: paperworkInfoSchema.optional(),
    }),
  ),
});
