(self.webpackChunkapp_scaffold=self.webpackChunkapp_scaffold||[]).push([[360],{"./src/apiClient.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>apiEventSource,n:()=>apiFetch});var _basePath__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/basePath.ts");async function apiFetch(input,init){return fetch((0,_basePath__WEBPACK_IMPORTED_MODULE_0__.h)(input),init)}function apiEventSource(input){return new EventSource((0,_basePath__WEBPACK_IMPORTED_MODULE_0__.h)(input))}},"./src/app/components/NavBar.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>NavBar_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),useNewCaseFromFiles=__webpack_require__("./src/app/useNewCaseFromFiles.ts"),useSession=__webpack_require__("./src/app/useSession.ts"),next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");function NavBar(){var _session_user,_session_user1;const pathname=(0,navigation.usePathname)(),uploadCase=(0,useNewCaseFromFiles.A)(),inputRef=(0,react.useRef)(null),{data:session}=(0,useSession.wV)();return pathname.startsWith("/point")?(0,jsx_runtime.jsx)("nav",{className:"p-2 flex justify-end bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:(0,jsx_runtime.jsx)(link_default(),{href:"/cases",className:"text-sm underline",children:"Cases"})}):(0,jsx_runtime.jsxs)("nav",{className:"py-4 px-8 flex items-center justify-between bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[(0,jsx_runtime.jsx)(link_default(),{href:"/",className:"text-lg font-semibold hover:text-gray-600 dark:hover:text-gray-300",children:"Photo To Citation"}),(0,jsx_runtime.jsx)("input",{type:"file",accept:"image/*",multiple:!0,hidden:!0,ref:inputRef,onChange:e=>uploadCase(e.target.files)}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-4 sm:gap-6 md:gap-8 text-sm",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>{var _inputRef_current;return null===(_inputRef_current=inputRef.current)||void 0===_inputRef_current?void 0:_inputRef_current.click()},children:"New Case from Image"}),(0,jsx_runtime.jsx)(link_default(),{href:"/point",className:"hover:text-gray-600 dark:hover:text-gray-300",children:"Point & Shoot"}),(0,jsx_runtime.jsx)(link_default(),{href:"/cases",className:"hover:text-gray-600 dark:hover:text-gray-300",children:"Cases"}),(0,jsx_runtime.jsx)(link_default(),{href:"/map",className:"hover:text-gray-600 dark:hover:text-gray-300",children:"Map View"}),"admin"===(null==session||null===(_session_user=session.user)||void 0===_session_user?void 0:_session_user.role)||"superadmin"===(null==session||null===(_session_user1=session.user)||void 0===_session_user1?void 0:_session_user1.role)?(0,jsx_runtime.jsx)(link_default(),{href:"/admin",className:"hover:text-gray-600 dark:hover:text-gray-300",children:"Admin"}):null,(0,jsx_runtime.jsx)(link_default(),{href:"/settings",className:"hover:text-gray-600 dark:hover:text-gray-300",children:"User Settings"}),session?(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>(0,useSession.CI)(),className:"hover:text-gray-600 dark:hover:text-gray-300",children:"Sign Out"}):(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>(0,useSession.Jv)(),className:"hover:text-gray-600 dark:hover:text-gray-300",children:"Sign In"})]})]})}NavBar.__docgenInfo={description:"",methods:[],displayName:"NavBar"};const NavBar_stories={component:NavBar,title:"Components/NavBar"},Default={render:()=>(0,jsx_runtime.jsx)(NavBar,{})},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  render: () => <NavBar />\n}",...Default.parameters?.docs?.source}}}},"./src/app/useNewCaseFromFiles.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useNewCaseFromFiles});var _apiClient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/apiClient.ts"),next_navigation__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs");function useNewCaseFromFiles(){const router=(0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.useRouter)();return async files=>{if(!files||0===files.length)return;const id=Date.now().toString(),preview=URL.createObjectURL(files[0]);sessionStorage.setItem(`preview-${id}`,preview);(await Promise.all(Array.from(files).map((file,idx)=>{const formData=new FormData;formData.append("photo",file),formData.append("caseId",id);const upload=(0,_apiClient__WEBPACK_IMPORTED_MODULE_0__.n)("/api/upload",{method:"POST",body:formData});return 0===idx&&upload.then(()=>{sessionStorage.removeItem(`preview-${id}`)}),upload}))).some(r=>!r.ok)?alert("Failed to upload one or more files."):router.push(`/cases/${id}`)}}},"./src/app/useSession.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{CI:()=>next_auth_react__WEBPACK_IMPORTED_MODULE_0__.signOut,Jv:()=>next_auth_react__WEBPACK_IMPORTED_MODULE_0__.signIn,wV:()=>next_auth_react__WEBPACK_IMPORTED_MODULE_0__.useSession});var next_auth_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next-auth/react/index.js")},"./src/basePath.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>withBasePath});const BASE_PATH=__webpack_require__("./src/lib/config.ts").$.NEXT_PUBLIC_BASE_PATH||"";function withBasePath(path){return`${BASE_PATH}${path}`}},"./src/lib/config.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>config});var dotenv__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/dotenv/lib/main.js"),dotenv__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_0__),zod__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/zod/dist/esm/index.js"),process=__webpack_require__("./node_modules/process/browser.js");dotenv__WEBPACK_IMPORTED_MODULE_0___default().config();const envSchema=zod__WEBPACK_IMPORTED_MODULE_1__.z.object({OPENAI_API_KEY:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),OPENAI_BASE_URL:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),LLM_PROVIDERS:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default("openai"),LLM_DRAFT_EMAIL_MODEL:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default("gpt-4o"),LLM_DRAFT_EMAIL_PROVIDER:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default("openai"),LLM_ANALYZE_IMAGES_MODEL:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default("gpt-4o"),LLM_ANALYZE_IMAGES_PROVIDER:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default("openai"),LLM_OCR_PAPERWORK_MODEL:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default("gpt-4o"),LLM_OCR_PAPERWORK_PROVIDER:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default("openai"),LLM_EXTRACT_INFO_MODEL:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default("gpt-4o"),LLM_EXTRACT_INFO_PROVIDER:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default("openai"),GOOGLE_MAPS_API_KEY:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),NEXT_PUBLIC_GOOGLE_MAPS_API_KEY:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),SMTP_HOST:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),SMTP_PORT:zod__WEBPACK_IMPORTED_MODULE_1__.z.coerce.number().optional(),SMTP_SECURE:zod__WEBPACK_IMPORTED_MODULE_1__.z.coerce.boolean().optional(),SMTP_USER:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),SMTP_PASS:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),SMTP_FROM:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),MOCK_EMAIL_TO:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),EMAIL_FILE:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),SUPER_ADMIN_EMAIL:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),NEXTAUTH_SECRET:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),NEXTAUTH_URL:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),CASE_STORE_FILE:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),VIN_SOURCE_FILE:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),SNAIL_MAIL_FILE:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),SNAIL_MAIL_PROVIDER_FILE:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),RETURN_ADDRESS:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),SNAIL_MAIL_PROVIDER:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default("mock"),SNAIL_MAIL_OUT_DIR:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),TWILIO_ACCOUNT_SID:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),TWILIO_AUTH_TOKEN:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),TWILIO_FROM_NUMBER:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),DOCSMIT_BASE_URL:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),DOCSMIT_EMAIL:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),DOCSMIT_PASSWORD:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),DOCSMIT_SOFTWARE_ID:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),IMAP_HOST:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),IMAP_PORT:zod__WEBPACK_IMPORTED_MODULE_1__.z.coerce.number().optional(),IMAP_USER:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),IMAP_PASS:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),IMAP_TLS:zod__WEBPACK_IMPORTED_MODULE_1__.z.coerce.boolean().default(!0),INBOX_STATE_FILE:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),NEXT_PUBLIC_BROWSER_DEBUG:zod__WEBPACK_IMPORTED_MODULE_1__.z.coerce.boolean().default(!1),NEXT_PUBLIC_BASE_PATH:zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default("")}).passthrough();const config={...function getConfig(){return envSchema.parse(process.env)}(),NEXT_PUBLIC_GOOGLE_MAPS_API_KEY:process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY,NEXT_PUBLIC_BROWSER_DEBUG:"true"===process.env.NEXT_PUBLIC_BROWSER_DEBUG,NEXT_PUBLIC_BASE_PATH:process.env.NEXT_PUBLIC_BASE_PATH||""}},"?0aec":()=>{},"?3fc0":()=>{},"?4068":()=>{},"?593c":()=>{},"?7bec":()=>{},"?8131":()=>{},"?a0c3":()=>{},"?cad2":()=>{},"?d546":()=>{},"?e7e4":()=>{},"?fbf1":()=>{}}]);