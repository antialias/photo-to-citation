"use strict";(self.webpackChunkapp_scaffold=self.webpackChunkapp_scaffold||[]).push([[360],{"./node_modules/next/dist/client/use-merged-ref.js":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"useMergedRef",{enumerable:!0,get:function(){return useMergedRef}});const _react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");function useMergedRef(refA,refB){const cleanupA=(0,_react.useRef)(null),cleanupB=(0,_react.useRef)(null);return(0,_react.useCallback)((current=>{if(null===current){const cleanupFnA=cleanupA.current;cleanupFnA&&(cleanupA.current=null,cleanupFnA());const cleanupFnB=cleanupB.current;cleanupFnB&&(cleanupB.current=null,cleanupFnB())}else refA&&(cleanupA.current=applyRef(refA,current)),refB&&(cleanupB.current=applyRef(refB,current))}),[refA,refB])}function applyRef(refA,current){if("function"==typeof refA){const cleanup=refA(current);return"function"==typeof cleanup?cleanup:()=>refA(null)}return refA.current=current,()=>{refA.current=null}}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},"./src/app/components/NavBar.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>NavBar_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),useNewCaseFromFiles=__webpack_require__("./src/app/useNewCaseFromFiles.ts");function NavBar(){const pathname=(0,navigation.usePathname)(),uploadCase=(0,useNewCaseFromFiles.A)(),inputRef=(0,react.useRef)(null);return pathname.startsWith("/point")?(0,jsx_runtime.jsx)("nav",{className:"p-2 flex justify-end bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:(0,jsx_runtime.jsx)(link_default(),{href:"/cases",className:"text-sm underline",children:"Cases"})}):(0,jsx_runtime.jsxs)("nav",{className:"py-4 px-8 flex items-center justify-between bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[(0,jsx_runtime.jsx)(link_default(),{href:"/",className:"text-lg font-semibold hover:text-gray-600 dark:hover:text-gray-300",children:"Photo To Citation"}),(0,jsx_runtime.jsx)("input",{type:"file",accept:"image/*",multiple:!0,hidden:!0,ref:inputRef,onChange:e=>uploadCase(e.target.files)}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-4 sm:gap-6 md:gap-8 text-sm",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>{var _inputRef_current;return null===(_inputRef_current=inputRef.current)||void 0===_inputRef_current?void 0:_inputRef_current.click()},children:"New Case from Image"}),(0,jsx_runtime.jsx)(link_default(),{href:"/point",className:"hover:text-gray-600 dark:hover:text-gray-300",children:"Point & Shoot"}),(0,jsx_runtime.jsx)(link_default(),{href:"/cases",className:"hover:text-gray-600 dark:hover:text-gray-300",children:"Cases"}),(0,jsx_runtime.jsx)(link_default(),{href:"/map",className:"hover:text-gray-600 dark:hover:text-gray-300",children:"Map View"}),(0,jsx_runtime.jsx)(link_default(),{href:"/settings",className:"hover:text-gray-600 dark:hover:text-gray-300",children:"Settings"})]})]})}NavBar.__docgenInfo={description:"",methods:[],displayName:"NavBar"};const NavBar_stories={component:NavBar,title:"Components/NavBar"},Default={render:()=>(0,jsx_runtime.jsx)(NavBar,{})},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  render: () => <NavBar />\n}",...Default.parameters?.docs?.source}}}},"./src/app/useNewCaseFromFiles.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>useNewCaseFromFiles});var next_navigation__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs");function useNewCaseFromFiles(){const router=(0,next_navigation__WEBPACK_IMPORTED_MODULE_0__.useRouter)();return async files=>{if(!files||0===files.length)return;const id=Date.now().toString(),preview=URL.createObjectURL(files[0]);sessionStorage.setItem(`preview-${id}`,preview);(await Promise.all(Array.from(files).map(((file,idx)=>{const formData=new FormData;formData.append("photo",file),formData.append("caseId",id);const upload=fetch("/api/upload",{method:"POST",body:formData});return 0===idx&&upload.then((()=>{sessionStorage.removeItem(`preview-${id}`)})),upload})))).some((r=>!r.ok))?alert("Failed to upload one or more files."):router.push(`/cases/${id}`)}}}}]);