"use strict";(self.webpackChunkapp_scaffold=self.webpackChunkapp_scaffold||[]).push([[897],{"./src/apiClient.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>apiEventSource,n:()=>apiFetch});var _basePath__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/basePath.ts");async function apiFetch(input,init){return fetch((0,_basePath__WEBPACK_IMPORTED_MODULE_0__.h)(input),init)}function apiEventSource(input){return new EventSource((0,_basePath__WEBPACK_IMPORTED_MODULE_0__.h)(input))}},"./src/app/settings/SettingsPage.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>SettingsPage_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),apiClient=__webpack_require__("./src/apiClient.ts"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");function SettingsPage(){const[sources,setSources]=(0,react.useState)([]),[mailProviders,setMailProviders]=(0,react.useState)([]);return(0,react.useEffect)((()=>{(0,apiClient.n)("/api/vin-sources").then((res=>res.json())).then((data=>setSources(data))),(0,apiClient.n)("/api/snail-mail-providers").then((res=>res.json())).then((data=>setMailProviders(data)))}),[]),(0,jsx_runtime.jsxs)("div",{className:"p-8",children:[(0,jsx_runtime.jsx)("h1",{className:"text-xl font-bold mb-4",children:"VIN Lookup Modules"}),(0,jsx_runtime.jsx)("ul",{className:"grid gap-2",children:sources.map((s=>(0,jsx_runtime.jsxs)("li",{className:"flex items-center gap-4",children:[(0,jsx_runtime.jsxs)("span",{className:"flex-1",children:[s.id," (failures: ",s.failureCount,")"]}),(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>async function toggle(id,enabled){await(0,apiClient.n)(`/api/vin-sources/${id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled})});const res=await(0,apiClient.n)("/api/vin-sources");res.ok&&setSources(await res.json())}(s.id,!s.enabled),className:s.enabled?"bg-green-500 text-white px-2 py-1 rounded":"bg-gray-300 dark:bg-gray-700 px-2 py-1 rounded",children:s.enabled?"Disable":"Enable"})]},s.id)))}),(0,jsx_runtime.jsx)("h1",{className:"text-xl font-bold my-4",children:"Snail Mail Providers"}),(0,jsx_runtime.jsx)("ul",{className:"grid gap-2",children:mailProviders.map((p=>(0,jsx_runtime.jsxs)("li",{className:"flex items-center gap-4",children:[(0,jsx_runtime.jsxs)("span",{className:"flex-1",children:[p.id," (failures: ",p.failureCount,")"]}),p.active?(0,jsx_runtime.jsx)("span",{className:"px-2 py-1 bg-green-500 text-white rounded",children:"Active"}):(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>async function activateProvider(id){await(0,apiClient.n)(`/api/snail-mail-providers/${id}`,{method:"PUT"});const res=await(0,apiClient.n)("/api/snail-mail-providers");res.ok&&setMailProviders(await res.json())}(p.id),className:"bg-gray-300 dark:bg-gray-700 px-2 py-1 rounded",children:"Activate"})]},p.id)))})]})}SettingsPage.__docgenInfo={description:"",methods:[],displayName:"SettingsPage"};const SettingsPage_stories={component:SettingsPage,title:"Pages/SettingsPage"};const Default={render:()=>(function mockFetch(){const statuses=[{id:"carfax",enabled:!0,failureCount:0},{id:"dmv",enabled:!1,failureCount:2}];__webpack_require__.g.fetch=async(url,options)=>options&&"PUT"===options.method?new Response(null):new Response(JSON.stringify(statuses))}(),(0,jsx_runtime.jsx)(SettingsPage,{}))},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    mockFetch();\n    return <SettingsPage />;\n  }\n}",...Default.parameters?.docs?.source}}}},"./src/basePath.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>withBasePath});const BASE_PATH=__webpack_require__("./node_modules/process/browser.js").env.NEXT_PUBLIC_BASE_PATH||"";function withBasePath(path){return`${BASE_PATH}${path}`}}}]);